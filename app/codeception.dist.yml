suites:
    api:
        actor: ApiTester
        path: .
        modules:
            enabled:
                - \Helper\Module\Api:
                      url: https://localhost:8443
                      depends: PhpBrowser
                - \Helper\Module\ExtendedDb:
                      depends: Db
                      dsn: "mysql:host=127.0.0.1;port=33060;dbname=misp"
                      user: "misp"
                      password: "example"
                      cleanup: true
                      cleanup_queries:
                          - "TRUNCATE misp.auth_keys;"
                          - "TRUNCATE misp.attributes;"
                          - "TRUNCATE misp.events;"
                          - "TRUNCATE misp.users;"
                          - "TRUNCATE misp.organisations;"
                          - "TRUNCATE misp.tags;"
                          - "TRUNCATE misp.attribute_tags;"
                          - "TRUNCATE misp.event_tags;"
                          - "TRUNCATE misp.galaxies;"
                          - "TRUNCATE misp.galaxy_clusters;"
                          - "TRUNCATE misp.galaxy_elements;"
                          - "TRUNCATE misp.jobs;"
                          - "TRUNCATE misp.servers;"
                          - "TRUNCATE misp.sharing_groups;"
                          - "TRUNCATE misp.sharing_group_orgs;"
                          - "TRUNCATE misp.sharing_group_servers;"
                          - "TRUNCATE misp.feeds;"
                          - "TRUNCATE misp.warninglists;"
                          - "TRUNCATE misp.warninglist_entries;"
                          - "TRUNCATE misp.warninglist_types;"
                - \Helper\Module\MispSettings:
                      depends: Cli
                      docker: true
                      docker_compose_file: "/home/john/docker-misp/docker-compose.yml"
                - \Helper\Module\OpenApiValidator:
                      depends: \Helper\Module\Api
                      openapi: "webroot/doc/openapi.yaml"
                - \Helper\Module\WireMock
            config:
                PhpBrowser:
                    url: https://localhost:8443
                    headers:
                        Accept: application/json
                        Content-Type: application/json
                Db:
                    dsn: "mysql:host=127.0.0.1;port=33060;dbname=misp"
                    user: "misp"
                    password: "example"

paths:
    tests: Test/Api
    output: Test/_output
    data: Test/_data
    support: Test/_support

settings:
    shuffle: false
    lint: true
